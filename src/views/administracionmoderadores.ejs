<!-- De esta manera incluimos el header desde el documento partials -->
<%- include('partials/_header')%>
<section id="navegacionmod">
    <ul>
        <h1>
            <li>
                <a href="/pantallaAdministracion">
                <img src="/images/v.svg" alt="logo">
                </a>
            </li>
            <li>
                <a href="/pantallaAdministracion">
                    Vialidolid<br>denuncias ciudadanas
                </a>
            </li>
        </h1>
        <div class="botonesmod">
            <li>
                <a href="/PantallaPerfilAdministrador/<%=session.id_empleado%>">Perfil</a>
            </li>
            <li>
                <a href="/pantallaMenuPrincipal">Cerrar Sesion</a>
            </li>
        </div>

    </ul>
</section>


<section id="contenidogeneral">
    <article>
        <div class="barralateral">
        <div class="botoneslateral">
     <h1>
        <span>
            <img src="/images/imagenperfil.svg">
            <p>Usuario: <%=session.usuario%></p>
            <p>Rol: <%=session.cargo%></p>
        </span>
    </h1>

        <a href="/administracionEncargado_dependencias">
            Encargados
        </a>

        <a href="/administracionEmpleados">
            Moderadores
        </a>
        <a href="/administracionDependencias">
            Dependencias
        </a>

        <a href="/administracionCiudadanos">
            Usuarios
        </a>
        <a href="administracionReportes">
            Reportes
        </a>
    </div>
    </div>
    
    <section class="contenedorderecho">
    <div class="contenido">
        <div class="contenidomoderacion">
            
            <section class="insercion">
                

                <form action="/insert/empleado" method="post" onsubmit="return validarFormulario()">
                    <h2>Registro</h2>
                        <input type="hidden" id="cargo" name="cargo" value="moderador">
                    
                    <div class="cajastexto">
                        <input type="text" id="nombre" name="nombre" placeholder="Nombre">
                    </div>

                    <div class="cajastexto">
                        <input type="text" id="apellido_paterno" name="apellido_paterno" placeholder="Apellido Paterno">
                    </div>

                    <div class="cajastexto">
                        <input type="text" id="apellido_materno" name="apellido_materno" placeholder="Apellido Materno">
                    </div> 

                    <div class="cajastexto">
                        <input type="text" id="usuario" name="usuario" placeholder="Usuario">
                    </div>

                    <div class="cajastexto">
                        <input type="text" id="contrasena" name="contrasena" placeholder="Contraseña">
                    </div>

                    <button type="submit">Ingresar</button>
                </form>

            </section>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Cargo</th>
                        <th>Nombre</th>
                        <th>Apellido paterno</th>
                        <th>Apellido materno</th>
                        <th>Usuario</th>
                        <th>Contraseña</th>
                        <th>Editar</th>
                        <th>Eliminar</th>
                    </tr>
                </thead>
                <tbody>
                    <%data.forEach(function(data) { if(data.cargo=='moderador'){%>
                    <tr>
                        <td><%= data.id_empleado%></td>
                        <td><%= data.cargo %></td>
                        <td><%= data.nombre %></td>
                        <td><%= data.apellido_paterno%></td>
                        <td><%= data.apellido_materno %></td>
                        <td><%= data.usuario %></td>
                        <td><%= data.contrasena %></td>
                        
                        <td><a href="/pantallaEdit/<%=data.id_empleado%>/empleado">Editar</a></td>
                        <td><a href="/delete/<%=data.id_empleado%>/empleado">Eliminar</a></td>
                    </tr>
                    <% }}); %>
                </tbody>
            </table>
        </div>
    </div>
</section>
    </article>
</section>



<%- include('partials/_footer')%>
<script>
    function validarFormulario() {
      var cargo= document.getElementById('cargo').value;
      var nombre= document.getElementById('nombre').value;
      var apellidopaterno = document.getElementById('apellido_paterno').value;
      var apellidmaterno = document.getElementById('apellido_materno').value;
      var usuario = document.getElementById('usuario').value;
      var contrasena = document.getElementById('contrasena').value;
  
      if (cargo === '' || nombre === '' || apellidopaterno === '' || apellidmaterno === '' || dependencia === '' || usuario === '' || contrasena === '') {
        alert('Por favor, rellena todos los campos');
        return false; // Detiene el envío del formulario
      }
  
      // Continuar con el envío del formulario si los campos están llenos
      return true;
    }
  </script>