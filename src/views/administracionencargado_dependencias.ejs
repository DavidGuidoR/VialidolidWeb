<!-- De esta manera incluimos el header desde el documento partials -->
<%- include('partials/_header')%>
<section id="navegacionmod">
    <ul>
        <h1>
            <li>
                <a href="/pantallaAdministracion">
                <img src="/images/v.svg" alt="logo">
                </a>
            </li>
            <li>
                <a href="/pantallaAdministracion">
                    Vialidolid<br>denuncias ciudadanas
                </a>
            </li>
        </h1>
        <div class="botonesmod">
            <li>
                <a href="/Perfil">Perfil</a>
            </li>
            <li>
                <a href="/pantallaMenuPrincipal">Cerrar Sesion</a>
            </li>
        </div>

    </ul>
</section>


<section id="contenidogeneral">
    <article>
        <div class="barralateral">
        <div class="botoneslateral">
     <h1>
        <span>
            <img src="/images/imagenperfil.svg">
            <p>Usuario: <%=session.usuario%></p>
            <p>Rol: <%=session.cargo%></p>
        </span>
    </h1>

        <a href="/administracionEncargado_dependencias">
            Encargados
        </a>

        <a href="/administracionEmpleados">
            Moderadores
        </a>
        <a href="/administracionDependencias">
            Dependencias
        </a>

        <a href="/administracionCiudadanos">
            Usuarios
        </a>
        <a href="administracionReportes">
            Reportes
        </a>
    </div>
    </div>
    
    <section class="contenedorderecho">
    <div class="contenido">
        <div class="contenidomoderacion">
            <section class="insercion">
                

                <form action="/insert/encargado_dependencia" method="post" onsubmit="return validarFormulario()">
                    <h2>Registro</h2>
                    <div class="cajastexto">
                        <input type="text" id="nombre" name="nombre" placeholder="Nombre">
                    </div>
                    
                    <div class="cajastexto">
                        <input type="text" id="apellido_paterno" name="apellido_paterno" placeholder="Apellido Paterno">
                    </div>

                    <div class="cajastexto">
                        <input type="text" id="apellido_materno" name="apellido_materno" placeholder="Apellido Materno">
                    </div> 
                    <label for="usuario">Dependencia:</label>
                    
                    <div class="cajastexto">    
                        <select id="id_dependencia" name="id_dependencia">
                            <option value="1">Ooapas</option>
                            <option value="2">Centro de atención animal</option>
                            <option value="3">Policía y transito</option>
                            <option value="4">Secretaria De Servicios Públicos Municipales</option>
                            <option value="5">Secretaría de Obras Públicas de Morelia</option>
                        </select>
                    </div>

                    <div class="cajastexto">
                        <input type="text" id="usuario" name="usuario" placeholder="Usuario">
                    </div>

                    <div class="cajastexto">
                        <input type="text" id="contrasena" name="contrasena" placeholder="Contraseña">
                    </div>
                    <button type="submit">Ingresar</button>
                </form>

            </section>

            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Apellido Paterno</th>
                        <th>Apellido Materno</th>
                        <th>Dependencia</th>
                        <th>Usuario</th>
                        <th>Contraseña</th>
                        <th>Editar</th>
                        <th>Eliminar</th>
                    </tr>
                </thead>
                <tbody>
                    <%data.forEach(function(data) {%>
                    <tr>
                        <td><%= data.id_encargado %></td>
                        <td><%= data.nombre %></td>
                        <td><%= data.apellido_paterno %></td>
                        <td><%= data.apellido_materno %></td>
                        <td><%= data.nombre_dependencia %></td>
                        <td><%= data.usuario%></td>
                        <td><%= data.contrasena %></td>
                        <td><a href="/pantallaEdit/<%=data.id_encargado%>/encargado_dependencia">Editar</a></td>
                        <td><a href="/delete/<%=data.id_encargado%>/encargado_dependencia">Eliminar</a></td>
                    </tr>
                    <% }); %>
                </tbody>
            </table>
        </div>
    </div>
    </section>
    </article>
</section>



<%- include('partials/_footer')%>
<script>
    function validarFormulario() {
      var nombre= document.getElementById('nombre').value;
      var apellidopaterno = document.getElementById('apellido_paterno').value;
      var apellidmaterno = document.getElementById('apellido_materno').value
      var dependencia = document.getElementById('id_dependencia').value;
      var usuario = document.getElementById('usuario').value;
      var contrasena = document.getElementById('contrasena').value;
  
      if (nombre === '' || apellidopaterno === '' || apellidmaterno === '' || dependencia === '' || usuario === '' || contrasena === '') {
        alert('Por favor, rellena todos los campos');
        return false; // Detiene el envío del formulario
      }
  
      // Continuar con el envío del formulario si los campos están llenos
      return true;
    }
  </script>